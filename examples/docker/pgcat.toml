## pgcat.toml
[general]
host = "0.0.0.0"
port = 6432
enable_prometheus_exporter = true
prometheus_exporter_port = 9930

log_client_connections = true
log_client_disconnections = true

server_tls = false
verify_server_certificate = false
#tls_certificate = "/etc/postgresql/certificate/server.crt"
#tls_private_key = "/etc/postgresql/certificate/server.key"

admin_username = "postgres"
admin_password = "postgres"

auth_query = "SELECT * FROM pgcat.user_lookup('$1');"
auth_query_user = "connection_pooler"
auth_query_password = "user-look-up-pass"
auth_query_database = "postgres"

## session mode
[pools.myapp]
pool_mode = "session"
default_role = "any"

# query_parser_enabled = true

sharding_function = "pg_bigint_hash"

[pools.myapp.users.0]
username = "myappadmin"
pool_size = 23

[pools.myapp.shards.0]
servers = [
#  [ "localhost", 15432, "primary" ], # to use without docker
    [ "postgres", 5432, "primary" ],  # to use with docker
]
database = "myapp"
